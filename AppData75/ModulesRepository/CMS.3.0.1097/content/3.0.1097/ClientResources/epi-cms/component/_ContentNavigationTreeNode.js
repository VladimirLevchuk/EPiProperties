//>>built
require({cache:{"url:epi-cms/component/templates/_ContentNavigationTreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\">\r\n    <div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow dijitInline\" role=\"presentation\">\r\n        <div data-dojo-attach-point=\"indentNode\" class=\"dijitInline\"></div>\r\n        <span data-dojo-attach-point=\"contentNode\" class=\"dijitTreeContent\" role=\"presentation\">\r\n            <span data-dojo-attach-point=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"></span>\r\n            <span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span>\r\n            <span data-dojo-attach-point=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"></span>\r\n            <span data-dojo-attach-point=\"extraIconsContainer\" class=\"epi-extraIconsContainer\" role=\"presentation\">\r\n                <span data-dojo-attach-point=\"iconNodeMenu\" class=\"epi-extraIcon epi-pt-contextMenu\" role=\"presentation\" data-dojo-attach-event=\"onmousedown:_onMouseDownIconNodeMenu, click: _onClickIconNodeMenu\" >&nbsp;</span>\r\n                <span data-dojo-attach-point=\"iconNodeStatus\" class=\"epi-extraIcon\" role=\"presentation\">&nbsp;</span>\r\n                <span data-dojo-attach-point=\"iconNodeAccess\" class=\"epi-extraIcon\" role=\"presentation\">&nbsp;</span>\r\n                <span data-dojo-attach-point=\"iconNodeLanguage\" class=\"epi-extraIcon epi-pt-currentLanguageMissing\" role=\"presentation\">&nbsp;</span>\r\n            </span>\r\n            <span data-dojo-attach-point=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\r\n        </span>\r\n    </div>\r\n    <div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\r\n</div>"}});define("epi-cms/component/_ContentNavigationTreeNode",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/Evented","dojo/mouse","dojo/on","dojo/text!./templates/_ContentNavigationTreeNode.html","epi/datetime","epi/dependency","epi/string","epi/shell/widget/_ModelBindingMixin","epi/shell/widget/Tooltip","epi-cms/core/ContentReference","epi-cms/widget/_ContentTreeNode","epi-cms/widget/viewmodel/ContentStatusViewModel","epi/i18n!epi/cms/nls/episerver.cms.components.pagetree","epi/i18n!epi/cms/nls/episerver.shared.header"],function(_1,_2,_3,_4,_5,_6,_7,_8,on,_9,_a,_b,_c,_d,_e,_f,_10,_11,res,_12){return _2([_10,_d,_7],{templateString:_9,res:res,hasContextMenu:true,_pageLocked:"epi-pt-accessRights",_pageBeingEdited:"epi-pt-edited",_contextMenuClass:"epi-iconContextMenu",_iconNodeClass:"",_iconNodeToolTip:undefined,_inUseTooltip:undefined,_selected:false,_contentTypeStore:null,postMixInProperties:function(){this.inherited(arguments);var _13=_b.resolve("epi.storeregistry");this._contentTypeStore=_13.get("epi.cms.contenttype");},postCreate:function(){this.inherited(arguments);this.set("model",new _11({contentStatus:this.item.status}));},modelBindingMap:{"statusIcon":["statusIcon"],"statusMessage":["statusMessage"]},_setStatusMessageAttr:function(_14){_5.set(this.iconNodeStatus,"title",_c.toTooltipText(_14));},_setStatusIconAttr:function(_15){if(!(_15 instanceof Array)){return;}_6.remove(this.iconNodeStatus);_6.add(this.iconNodeStatus,"dijitTreeIcon epi-extraIcon");_1.forEach(_15,function(_16){_6.add(this.iconNodeStatus,_16);},this);},destroy:function(){this.inherited(arguments);this._destroyIconNodeTooltip();},setSelected:function(_17){this.inherited(arguments);if(this.hasContextMenu){_6.toggle(this.iconNodeMenu,this._contextMenuClass,this._selected=_17);}},showContextMenu:function(_18){if(!this._selected&&this.hasContextMenu){_6.toggle(this.iconNodeMenu,this._contextMenuClass,_18);}},_onClickIconNodeMenu:function(evt){_3.stop(evt);this.labelNode.focus();this.emit("onContextMenuClick",{node:this,target:evt.target,x:evt.pageX,y:evt.pageY});},_onMouseDownIconNodeMenu:function(evt){_3.stop(evt);},_updateIndividualLayout:function(){this._updateAccessRightIcon();if(this.model){this.model.set("contentStatus",this.item.status);}this._createTooltip();},_updateAccessRightIcon:function(){if(this.item.accessMask===0||this.item.accessMask==1){_6.add(this.iconNodeAccess,this._pageLocked);_5.set(this.iconNodeAccess,"title",this.res.tooltip.pagelocked);_6.add(this.contentNode,"epi-treeReadOnly");}else{if(this.item.inUseNotifications&&this.item.inUseNotifications.length>0){_6.add(this.iconNodeAccess,this._pageBeingEdited);var _19=[{label:this.res.tooltip.beingedited}];_1.forEach(this.item.inUseNotifications,function(_1a){var _1b=_a.toUserFriendlyHtml(_1a.created);_19.push({label:_1a.userName+", "+_1b,htmlEncode:false});},this);this._populateIconNodeTooltip(_19,this.iconNodeAccess);}else{_6.remove(this.iconNodeAccess,this._pageBeingEdited);_6.remove(this.iconNodeAccess,this._pageLocked);_6.remove(this.contentNode,"epi-treeReadOnly");this._destroyIconNodeTooltip();}}},_createTooltip:function(){if(this.indent<0){return;}var _1c=new _f(this.item.contentLink);var _1d=this.item.name+", "+_12.id+": "+_1c.id+" ("+_12.type+": "+this.item.contentTypeName+")";_5.set(this.labelNode,"title",_1d);_5.set(this.iconNode,"title",_1d);},_populateIconNodeTooltip:function(_1e,_1f){if(!this._iconNodeToolTip){this._iconNodeToolTip=new _e({position:["after-centered","below"]});}this._iconNodeToolTip.tooltipRows=_1e;this.own(on(_1f,_8.enter,_4.hitch(this,function(){if(this._iconNodeToolTip){this._iconNodeToolTip.open(_1f);}})),on(_1f,_8.leave,_4.hitch(this,function(){if(this._iconNodeToolTip){this._iconNodeToolTip.close();}})));},_destroyIconNodeTooltip:function(){if(this._iconNodeToolTip){this._iconNodeToolTip.destroyRecursive();this._iconNodeToolTip=null;}}});});